<!DOCTYPE html>
<html>
<head>
  <base href="https://office.chaoxing.com/">
  <meta charset="UTF-8">
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
  <title>出错了</title>
<base href="https://office.chaoxing.com/">
<script type="text/javascript">
  var photoUrl = 'http://photo.chaoxing.com'
  var panUrl = 'http://pan-yz.chaoxing.com'
  var noteUrl = 'http://noteyd.chaoxing.com'
  var staticDomain = 'https://office-static.chaoxing.com/r/'
  photoUrl = document.location.protocol + photoUrl.split(":")[1]
  panUrl = document.location.protocol + panUrl.split(":")[1]
  noteUrl = document.location.protocol + noteUrl.split(":")[1]
  if (staticDomain !== '') {
    staticDomain = document.location.protocol + staticDomain.split(":")[1]
  }
</script>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="format-detection" content="telephone=no,email=no,address=no">
<meta http-equiv="pragma" content="no-cache"/>
<meta http-equiv="cache-control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/style/reset.css">
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/style/apps/reserve/reserve.css">
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/style/apps/reserve/index.css">
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/style/apps/reserve/iphonex.css">
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/style/apps/reserve/reserve_mobile.css">
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/style/forms/gather/mobile/hind/index.css">
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/style/forms/gather/mobile/hind/common.css">
<link rel="stylesheet" href="https://office-static.chaoxing.com/r/staticreserve/js/lib/jquery/slider/slider.css">
<script type="text/javascript" src="//api.map.baidu.com/api?type=webgl&v=1.0&ak=p7HrxjMD6R1hbPFP9sNgkfHjsNZumBai"></script>
<script src="https://apps.eshiyun.info/jsapi/2.0.0/eshiminjs.min.js" type="text/javascript"></script>
<script type="text/javascript" src="https://office-static.chaoxing.com/r/staticreserve/js/lib/requirejs/require.min.js"></script>
<script type="text/javascript" src="https://office-static.chaoxing.com/r/staticreserve/js/src/front/apps/reserve/main.js?t=2026021017"></script>
<script>requirejs.config({urlArgs: 't=2026021017'})</script>
<script>window['jsBridge'] = {}</script>
  <link rel="stylesheet" type="text/css" href="https://office-static.chaoxing.com/r/staticreserve/style/error/error.css"/>
  <style>
    .black_reason {
      padding-left: 50px;
      padding-right: 50px;
      word-break: break-all;
      word-wrap: break-word;
      white-space: normal;
    }
  </style>
</head>
<body>
<div class="g_version" id="error" v-cloak>
  <img class="g_popIcon" src="https://office-static.chaoxing.com/r/staticreserve/style/error/web/images/500.svg" />
  <p class="g_tipInfo" v-for="message in messageList">{{ message }}</p>
  <p class="g_tipInfo" v-if="blackDays">限制时长：{{ blackDays }}</p>
  <p class="g_tipInfo black_reason" v-if="blackReason">限制原因：{{ blackReason }}</p>
  <span class="log_out" v-if="logOutShow" @click="logOut">退出登录</span>
</div>
<div style="display: none" id="param"
     data-msg="未查询到您所访问的应用，请咨询管理员配置是否正确"
     data-black-days=""
     log-out-show=""
     data-black-reason="">
</div>
<div style="display: none;">
  path: 
  parameters: msg=未查询到您所访问的应用，请咨询管理员配置是否正确
  status: 
  errorMsg: 
  exception: 
</div>
<script type="text/javascript">
  require(['jquery', 'Vue', 'popup', 'ratio'], function ($, Vue, popup) {
    function operateData(url, data) {
      return $.getJSON(url, data)
    }
    new Vue({
      el: '#error',
      data: {
        messageList: [], //错误信息
        logOutShow: false,
        blackDays: '', //限制时长
        blackReason: '' //限制原因
      },
      methods: {
        logOut: function () {
          operateData('front/apps/reserve/user/login/logout', {}).then(function (res) {
            if (res.success) {
              var passport2Host = 'https://passport2.chaoxing.com'
              location.href = passport2Host + '/logout.html?refer=' + encodeURIComponent(passport2Host + '/mlogin?loginType=1&newversion=true&fid=&refer=' + encodeURIComponent(location.href))
            } else {
              popup.alert(res.msg, '我知道了', function () {
                location.reload()
              })
            }
          })
        }
      },
      created: function () {
        var _this = this
        var el = document.getElementById('param');
        var msg = el.dataset.msg || '';
        _this.blackDays = el.dataset.blackDays || '';
        _this.blackReason = el.dataset.blackReason || '';
        _this.logOutShow = el.dataset.logOutShow || false;
        //解析msg，如果存在换行符自动换行
        if (msg.indexOf('\n') > -1) {
          var msgArr = msg.split('\n')
          for (var i = 0; i < msgArr.length; i++) {
            _this.messageList.push(msgArr[i])
          }
        } else {
          //如果不存在换行符，则直接添加到数组中
          _this.messageList.push(msg)
        }
      }
    })
  })
</script>
</body>
</html>

